apply plugin: 'groovy'

sourceCompatibility = 1.7
targetCompatibility = 1.7

buildscript {
    repositories {
        mavenCentral()
        mavenLocal()
        maven {
            url ARTIFACTORY_RELEASE_PUSH
        }
        maven {
            url ARTIFACTORY_SNAPSHOT_PUSH
        }
    }
    dependencies {
        classpath 'jp.co.rakuten.sdtd.plugin:artifactory:1.1.0'
        classpath 'jp.co.rakuten.sdtd.perf:stubs:0.1.0-SNAPSHOT'
        classpath 'jp.co.rakuten.sdtd.perf:core:0.1.0-SNAPSHOT'
    }
}

dependencies {
    compile gradleApi()
    compile localGroovy()
}

// --- ARTIFACTORY ---

apply plugin: 'jp.co.rakuten.sdtd.artifactory'

artifactory {
    group = PLUGIN_GROUP
    artifact = PLUGIN_NAME
    version = PLUGIN_VERSION
    description = PLUGIN_DESCRIPTION
}

apply plugin: 'maven'

group = project.PLUGIN_GROUP
version = PLUGIN_VERSION


uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: ARTIFACTORY_RELEASE_PUSH) {
                authentication(userName: ARTIFACTORY_USER, password: ARTIFACTORY_PSWD)
            }
            pom.groupId = project.PLUGIN_GROUP
            pom.artifactId = PLUGIN_NAME
            pom.version = PLUGIN_VERSION
            pom.project {
                name PLUGIN_DESCRIPTION
                url project.PLUGIN_REPOSITORY
            }
        }
    }
}
